if which broot >/dev/null; then
    source "${HOME}/.config/broot/launcher/bash/br"
fi

if which fzf >/dev/null; then
    if zvm_available; then
        zvm_after_init_commands+=(
        # system-wide install
        '[ -f /usr/share/fzf/key-bindings.zsh ] && source /usr/share/fzf/key-bindings.zsh'
        '[ -f /usr/share/fzf/completion.zsh ] && source /usr/share/fzf/completion.zsh'

        # local install
        '[ -f ~/.local/share/fzf/key-bindings.zsh ] && source ~/.local/share/fzf/key-bindings.zsh'
        '[ -f ~/.local/share/fzf/completion.zsh ] && source ~/.local/share/fzf/completion.zsh'
        )
    else
        # system-wide install
        [ -f /usr/share/fzf/key-bindings.zsh ] && source /usr/share/fzf/key-bindings.zsh
        [ -f /usr/share/fzf/completion.zsh ] && source /usr/share/fzf/completion.zsh

        # local install
        [ -f ~/.local/share/fzf/key-bindings.zsh ] && source ~/.local/share/fzf/key-bindings.zsh
        [ -f ~/.local/share/fzf/completion.zsh ] && source ~/.local/share/fzf/completion.zsh
    fi
fi

if [ -f /opt/textidote/textidote.zsh ]; then
    source /opt/textidote/textidote.zsh
fi

if which carapace >/dev/null; then
    # Loading all of carapace breaks file completion in too many places:
    # just load what we need: gh completions
    source <(carapace gh zsh)
fi

if [ -f /opt/google-cloud-sdk/completion.zsh.inc ]; then
    source /opt/google-cloud-sdk/completion.zsh.inc
fi
if [ -f /opt/google-cloud-sdk/path.zsh.inc ]; then
    source /opt/google-cloud-sdk/path.zsh.inc
fi

if which zoxide >/dev/null; then
    eval "$(zoxide init zsh)"
fi

if which ugrep >/dev/null && [ -n "${NO_UGREP:-x}" ]; then
    alias grep='ugrep -G'
    alias egrep='ugrep -E'
    alias fgrep='ugrep -F'
    # alias pgrep='ugrep -P'
    alias xgrep='ugrep -U --hexdump'
    alias zgrep='ugrep -zG'
    alias zegrep='ugrep -zE'
    alias zfgrep='ugrep -zF'
    alias zpgrep='ugrep -zP'
    alias zxgrep='ugrep -zU --hexdump'
    alias xdump='ugrep -X ""'
fi
if which ug >/dev/null && [ -n "${NO_UGREP:-x}" ]; then
    alias uq='ug -Q'
    alias ux='ug -U --hexdump'
    alias uz='ug -z'
    alias ugit='ug --ignore-files'
fi

if command -v batpipe >/dev/null; then
    eval "$(batpipe)"
fi

if [ -f /etc/profile.d/prll.sh ]; then
    source /etc/profile.d/prll.sh
fi

# vim: ft=zsh
